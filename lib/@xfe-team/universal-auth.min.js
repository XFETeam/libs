!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@xfe-team/universal-auth",[],t):"object"==typeof exports?exports["@xfe-team/universal-auth"]=t():e["@xfe-team/universal-auth"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=29)}([function(e,t,n){"use strict";function r(){return(navigator.userAgent||navigator.vendor||window.opera).toLowerCase()}function o(){var e=r();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ -\/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ \/])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))}function i(){return/android/i.test(r())}function a(){return/iPad|iPhone|iPod/i.test(r())&&!window.MSStream}function u(){var e=r();return"micromessenger"===String(e.match(/MicroMessenger/i))}function c(){return o()&&u()}function s(){var e=r(),t=a()&&/ QQ/i.test(e),n=i()&&/MQQBrowser/i.test(navigator.userAgent)&&/QQ/i.test(e.split("mqqbrowser"));return o()&&(t||n)}function l(){var e=r();return o()&&/(weibo)/.test(e)}function f(){var e=r();return/jianghudaily/i.test(e)}n.r(t),n.d(t,"getUserAgent",function(){return r}),n.d(t,"isMobile",function(){return o}),n.d(t,"isAndroid",function(){return i}),n.d(t,"isIOS",function(){return a}),n.d(t,"isWeiXin",function(){return u}),n.d(t,"isMWeiXin",function(){return c}),n.d(t,"isMQQ",function(){return s}),n.d(t,"isMWeibo",function(){return l}),n.d(t,"isJianghuDaily",function(){return f})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOBILELOGIN_URL=t.PASSPORT_ROOT_ADDRESS=t.XOYO_LOGIN_API=t.XOYO_ROOT_API=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(15));var o=(0,r.default)()?"//ws.xoyo.com":"//test-ws.xoyo.com";t.XOYO_ROOT_API=o;var i=(0,r.default)()?"//pf-api.xoyo.com":"//my-api-dev.xoyo.com";t.XOYO_LOGIN_API=i;var a="".concat(i,"/passport/common_api");t.PASSPORT_ROOT_ADDRESS=a;var u=(0,r.default)()?"//m.xoyo.com/passport/signin.html":"//m-dev.xoyo.com/passport/signin.html";t.MOBILELOGIN_URL=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(15)),o=c(n(13)),i=c(n(12)),a=c(n(25)),u=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isMaster=r.default,this._isDailyOnly=!1,this._loginType=[(0,u.default)()&&"daily",(0,o.default)()&&"wechat",(0,i.default)()&&"qq",(0,a.default)()&&"weibo","h5"].filter(Boolean)[0],this._isDailyApp=(0,u.default)(),this._hasEnterAuth=!1}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"isMaster",get:function(){return this._isMaster}},{key:"isDailyOnly",get:function(){return this._isDailyOnly},set:function(e){this._isDailyOnly=e}},{key:"loginType",get:function(){return this._loginType}},{key:"isDailyApp",get:function(){return this._isDailyApp},set:function(e){this._isDailyApp=e}},{key:"hasEnterAuth",get:function(){return this._hasEnterAuth},set:function(e){this._hasEnterAuth=e}}]),e}();t.default=l,e.exports=t.default},function(e,t){var n=0;e.exports=function(e,t){var r,o,i,a,u=(t=t||{}).prefix||"__jp",c=t.param||"callback",s=t.timeout?t.timeout:15e3,l=document.getElementsByTagName("script")[0]||document.head,f=function(){},d=u+n++;return i=function(){r&&r.parentNode&&r.parentNode.removeChild(r),window[d]=f,o&&clearTimeout(o)},{promise:new Promise(function(t,n){s&&(o=setTimeout(function(){i(),n(new Error("Timeout"))},s)),window[d]=function(e){i(),t(e)},e=(e+=(~e.indexOf("?")?"&":"?")+c+"="+encodeURIComponent(d)).replace("?&","?"),(r=document.createElement("script")).src=e,l.parentNode.insertBefore(r,l),a=function(){window[d]&&(i(),n(new Error("Canceled")))}}),cancel:a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14));var o=function(e,t){return(0,r.default)("error",e,t)};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(14));var o=function(e,t){return(0,r.default)("success",e,t)};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(20)),o=s(n(12)),i=s(n(13)),a=s(n(5)),u=s(n(4)),c=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e,t){try{var n=i[e](t),a=n.value}catch(e){return void o(e)}n.done?r(a):Promise.resolve(a).then(u,c)}function u(e){a("next",e)}function c(e){a("throw",e)}u()})}}(regeneratorRuntime.mark(function e(){var t,n,s,l,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,i.default)()&&!(0,o.default)()){e.next=17;break}return n=new c.default,e.next=4,r.default.getCurrentUserInfo();case 4:if(s=e.sent,l=!1,1===s.status?t=(0,a.default)(s.data):(-14601===s.code&&(l=!0),t=(0,u.default)(s)),!l){e.next=17;break}return f=n.loginType,e.next=11,r.default.getAuthUrl({loginType:f});case 11:if(1!==(d=e.sent).status){e.next=16;break}window.location.href=d.data.auth_url,e.next=17;break;case 16:throw new Error("第三方获取授权地址异常: "+JSON.stringify(d));case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){t||(t=window.location.href),e=e.replace(/[[]]/g,"$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(24)),o=d(n(23)),i=d(n(22)),a=d(n(21)),u=d(n(5)),c=d(n(4)),s=d(n(10)),l=d(n(7)),f=d(n(2));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e,t){try{var n=i[e](t),a=n.value}catch(e){return void o(e)}n.done?r(a):Promise.resolve(a).then(u,c)}function u(e){a("next",e)}function c(e){a("throw",e)}u()})}}(regeneratorRuntime.mark(function e(){var t,n,d,p,v,m,_,g,h,y,b=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.length>0&&void 0!==b[0]?b[0]:{},n=t.token,d=t.limitGuest,p=void 0===d?1:d,v=t.limitOnlyHasJx3RoleAccessInDaily,m=void 0!==v&&v,!(0,s.default)()){e.next=22;break}return(g=new f.default).hasEnterAuth||(g.hasEnterAuth=!0,(n=n||(0,l.default)("token")||(0,l.default)("ssoToken"))||(n=function(){var e=(0,r.default)(),t=(0,o.default)(window.location.search,"token");return(0,i.default)(window.location.pathname+(0,o.default)(t,"ssoToken")+window.location.hash),e}())),e.next=6,a.default.loginByToken({limitGuest:p,limitOnlyHasJx3RoleAccessInDaily:m,token:n});case 6:if(1===(h=e.sent).status){e.next=10;break}throw window.location.href="https://jx3.seasungame.com/error-pages/index.html?login-expired",new Error("DAILY_APP_AUTH 登录态失效，请重新登录: "+JSON.stringify(h));case 10:return e.next=12,a.default.getAccountInfo();case 12:if(1!==(y=e.sent).status){e.next=18;break}_=(0,u.default)(y.data),m&&y.data.app_default_passport_roles&&0===y.data.app_default_passport_roles.length&&(window.location.href="https://jx3.seasungame.com/error-pages/index.html?no-account"),e.next=22;break;case 18:if(-14702!==y.code){e.next=21;break}throw window.location.href="https://jx3.seasungame.com/error-pages/index.html?login-expired",new Error("DAILY_APP_AUTH 登录态失效，请重新登录: "+JSON.stringify(h));case 21:_=(0,c.default)(y);case 22:return e.abrupt("return",_);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._XOYO_AUTH={},this._THIRD_PARTY_AUTH={}}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"XOYO_AUTH",get:function(){return this._XOYO_AUTH},set:function(e){this._XOYO_AUTH=e}},{key:"THIRD_PARTY_AUTH",get:function(){return this._THIRD_PARTY_AUTH},set:function(e){this._THIRD_PARTY_AUTH=e}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0);var o=function(){return/jianghudaily/i.test((0,r.getUserAgent)())};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=function(){var e=(0,r.getUserAgent)();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ -\/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ \/])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=u(n(11)),i=u(n(27)),a=u(n(26));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=(0,r.getUserAgent)(),t=(0,i.default)()&&/ QQ/i.test(e),n=(0,a.default)()&&/MQQBrowser/i.test(navigator.userAgent)&&/QQ/i.test(e.split("mqqbrowser"));return(0,o.default)()&&(t||n)};t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=function(){var e=(0,r.getUserAgent)();return"micromessenger"===String(e.match(/MicroMessenger/i))};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(2)),o=i(n(9));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n){var i=n?"XOYO_AUTH":"THIRD_PARTY_AUTH",a=new r.default,u=new o.default,c={ua:a.loginType,status:e,data:t};return u[i]=c,u[i]};t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){var e=window.location.hostname,t=-1===e.indexOf("test"),n=e.indexOf("xoyo.com")>-1;return t&&n};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(28)),o=a(n(5)),i=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e,t){try{var n=i[e](t),a=n.value}catch(e){return void o(e)}n.done?r(a):Promise.resolve(a).then(u,c)}function u(e){a("next",e)}function c(e){a("throw",e)}u()})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.default.getInfo();case 2:if(1!==(t=e.sent).status){e.next=7;break}n=(0,o.default)(t.data,!0),e.next=14;break;case 7:if(-10402!==t.code&&-20101!==t.code){e.next=12;break}t.reason="require-login",n=(0,i.default)(t,!0),e.next=14;break;case 12:throw alert("网络异常, 请稍后重试"),new Error("passport/common_api/get_info 授权异常: "+JSON.stringify(t));case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),o=n(1);var i={logout:function(){return(0,r.default)("".concat(o.PASSPORT_ROOT_ADDRESS,"/logout"),{}).promise}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(17)),o=n(1);var i={login:function(){var e=window.location.href;window.location.href="".concat(o.MOBILELOGIN_URL,"?redirect=").concat(e)},logout:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e,t){try{var n=i[e](t),a=n.value}catch(e){return void o(e)}n.done?r(a):Promise.resolve(a).then(u,c)}function u(e){a("next",e)}function c(e){a("throw",e)}u()})}}(regeneratorRuntime.mark(function e(t){var n,o,i,a,u,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.shouldRefresh,o=void 0!==n&&n,i=t.onSuccess,a=void 0===i?{}:i,u=t.onFail,c=void 0===u?{}:u,e.next=3,r.default.logout();case 3:return 1===(s=e.sent).status?(o&&location.reload(),a&&a()):c&&c(),e.abrupt("return",s);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(8)),o=u(n(6)),i=u(n(16)),a=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e,t){try{var n=i[e](t),a=n.value}catch(e){return void o(e)}n.done?r(a):Promise.resolve(a).then(u,c)}function u(e){a("next",e)}function c(e){a("throw",e)}u()})}}(regeneratorRuntime.mark(function e(t){var n,u,c,s,l,f,d,p,v,m,_,g,h,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.daily,u=void 0===n||n,c=t.limitOnlyHasJx3RoleAccessInDaily,s=void 0!==c&&c,l=t.weixinQQ,f=void 0===l||l,d=t.xoyo,p=void 0===d||d,v=t.debug,m=void 0!==v&&v,_=t.disable,g=void 0!==_&&_,y=new a.default,g){e.next=21;break}if(!u){e.next=10;break}return e.next=6,(0,r.default)({limitOnlyHasJx3RoleAccessInDaily:s});case 6:h=e.sent,y.THIRD_PARTY_AUTH=h,e.next=15;break;case 10:if(!f){e.next=15;break}return e.next=13,(0,o.default)();case 13:h=e.sent,y.THIRD_PARTY_AUTH=h;case 15:if(!p){e.next=20;break}return e.next=18,(0,i.default)();case 18:h=e.sent,y.XOYO_AUTH=h;case 20:m&&setTimeout(function(){alert("THIRD_PARTY_AUTH\n"+JSON.stringify(y.THIRD_PARTY_AUTH)),alert("XOYO_AUTH\n"+JSON.stringify(y.XOYO_AUTH))},800);case 21:return e.abrupt("return",y);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),o=n(1);var i={getCurrentUserInfo:function(){var e="ts=".concat(+new Date);return(0,r.default)("".concat(o.XOYO_ROOT_API,"/core/thirdlogin/get_current_user_info?").concat(e),{}).promise},getAuthUrl:function(e){var t=e.loginType,n=e.callbackUrl,i=void 0===n?encodeURIComponent(window.location.href):n,a="ts=".concat(+new Date,"&login_type=").concat(t,"&font_callback=").concat(i);return(0,r.default)("".concat(o.XOYO_ROOT_API,"/core/thirdlogin/get_auth_url?").concat(a),{}).promise}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),o=n(1);var i={loginByToken:function(e){var t=e.limitGuest,n=void 0===t?1:t,i=e.token,a=e.limitOnlyHasJx3RoleAccessInDaily,u=void 0!==a&&a,c="ts=".concat(+new Date,"&limit_guest=").concat(n,"&token=").concat(i).concat(u?"&query_default_passport_roles=1":"");return(0,r.default)("".concat(o.XOYO_ROOT_API,"/core/jhdaily/login_by_token?").concat(c),{}).promise},getAccountInfo:function(){var e="ts=".concat(+new Date);return(0,r.default)("".concat(o.XOYO_ROOT_API,"/core/jhdaily/get_current_account?").concat(e),{}).promise}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){window.history.replaceState({},document.title,e)};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){var n=e.split("?");if(n.length>=2){for(var r=encodeURIComponent(t)+"=",o=n[1].split(/[&;]/g),i=o.length;i-- >0;)-1!==o[i].lastIndexOf(r,0)&&o.splice(i,1);return n[0]+(o.length>0?"?"+o.join("&"):"")}return e};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(7));var o=function(){return(0,r.default)("token")||(0,r.default)("ssoToken")||null};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n(11));var i=function(){var e=(0,r.getUserAgent)();return(0,o.default)()&&/(weibo)/.test(e)};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=function(){return/android/i.test((0,r.getUserAgent)())};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=function(){return/iPad|iPhone|iPod/i.test((0,r.getUserAgent)())&&!window.MSStream};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n(3));var i={getInfo:function(){var e="ts=".concat(+new Date);return(0,o.default)("".concat(r.XOYO_LOGIN_API,"/passport/common_api/get_info?ts=").concat(e),{}).promise}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getXoyoAuth",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getDailyAuth",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getQQWeixinAuth",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"getAuthInfoByAppEnv",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"GeneralTools",{enumerable:!0,get:function(){return u.default}});var r=c(n(16)),o=c(n(8)),i=c(n(6)),a=c(n(19)),u=c(n(18));function c(e){return e&&e.__esModule?e:{default:e}}n(2)}])});
//# sourceMappingURL=universal-auth.min.js.map